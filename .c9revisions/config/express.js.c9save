{"ts":1363876162797,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1363877295503,"patch":[[{"diffs":[[1,"var express = require('express');\r\nvar mongoStore = require('connect-mongo')(express);\r\n  \r\nmodule.exports = function (app, config, passport) {\r\n    \r\n    app.set('showStackError', true);\r\n    app.use(express.compress());\r\n    app.use(express.static(config.root + '/public'));\r\n    app.use(express.logger('dev'));\r\n    app.set('views', config.root + '/views');\r\n    app.set('view engine', 'jade');\r\n     // cookieParser should be above session\r\n    app.use(express.cookieParser());\r\n\r\n    // bodyParser should be above methodOverride\r\n    app.use(express.bodyParser());\r\n    app.use(express.methodOverride());\r\n\r\n    // express/mongo session storage\r\n    app.use(express.session({\r\n      secret: 'noobjs',\r\n      store: new mongoStore({\r\n        url: config.db,\r\n        collection : 'sessions'\r\n      })\r\n    }));\r\n  \r\n    app.use(passport.initialize());\r\n    app.use(passport.session());"]],"start1":0,"start2":0,"length1":0,"length2":889}]],"length":889,"saved":false}
{"ts":1363877502036,"patch":[[{"diffs":[[0,".session());"],[1,"\r\n    \r\n    // serves icons faster\r\n    app.use(express.favicon());\r\n    \r\n    app.use(app.router);\r\n    \r\n     // assume \"not found\" in the error msgs\r\n    // is a 404. this is somewhat silly, but\r\n    // valid, you can do whatever you like, set\r\n    // properties, use instanceof etc.\r\n    app.use(function(err, req, res, next){\r\n      // treat as 404\r\n      if (~err.message.indexOf('not found')) return next();\r\n\r\n      // log it\r\n      console.error(err.stack);\r\n\r\n      // error page\r\n      res.status(500).render('500', { error: err.stack });\r\n    });\r\n\r\n    // assume 404 since no middleware responded\r\n    app.use(function(req, res, next){\r\n      res.status(404).render('404', { url: req.originalUrl });\r\n    });\r\n}\r\n    \r\n    "]],"start1":877,"start2":877,"length1":12,"length2":748}]],"length":1625,"saved":false}
